# MVP-0 要求定義  
## 出版社 納品スパイク

---

## 1. 目的

本MVP-0では、出版社が書籍のメタデータおよび書籍本体ファイルを納品でき、  
その納品物を自社側で確認できる状態を作ることを目的とする。

本MVPはアジャイル開発における最小の検証単位であり、  
後続の配信・許諾・売上・精算機能の前提となる「納品」という行為を成立させることに集中する。

---

## 2. スコープ

### 2.1 含めるもの（実装対象）

#### 書籍メタデータ登録
- 書籍を識別するための最小限のメタデータを登録できる
- 必須項目
  - ISBN（必須・一意）
  - タイトル（必須）
- 任意項目
  - 価格（将来利用する前提のため登録可能とする）

#### 書籍本体ファイル登録
- 書籍本体ファイルをアップロードできる
- ファイル形式は **PDF のみ** とする
- 1書籍につきファイルは1つ
- バージョンは **v1 固定** とし、差し替えは行わない

#### 納品確認（自社視点）
- 納品された書籍の一覧を確認できる
- 書籍ごとに以下が確認できる
  - 登録されたメタデータ
  - ファイルが登録されているかどうか
  - ファイルの参照情報（ダウンロード、または保存パス）

---

### 2.2 含めないもの（実装対象外）

- ログイン／認証機能
- ユーザー／アカウント管理
- 出版社の複数社管理（出版社は1社固定でよい）
- 書店の概念
- 配信許諾管理
- 配信処理（SFTP／疑似配信）
- 売上報告
- 精算処理
- メール通知
- アダルトレベル
- サムネイル管理
- 配信日／先行販売
- ファイル差し替え／バージョン管理

---

## 3. 完了条件（Doneの定義）

以下をすべて満たした時点で、本MVP-0は完了とする。

1. 書籍メタデータを登録できる
2. 同一ISBNの書籍登録は拒否される
3. 登録済み書籍に対してPDFファイルをアップロードできる
4. 登録された書籍一覧を取得できる
5. 書籍詳細から、メタデータおよびファイル情報を確認できる
6. アップロードされたPDFファイルが保存され、参照可能である

---

## 4. API（最小）

### 書籍メタデータ登録
- `POST /books`

### 書籍一覧取得
- `GET /books`

### 書籍詳細取得
- `GET /books/{bookId}`

### 書籍本体ファイル登録
- `POST /books/{bookId}/file`

---

## 5. 受け入れ条件（Given / When / Then）

- Given ISBNが未登録である  
  When 書籍を登録する  
  Then 書籍が作成され、書籍IDが返却される  

- Given 同一ISBNの書籍が既に存在する  
  When 書籍を登録する  
  Then 登録は拒否され、エラーが返却される  

- Given 書籍が存在する  
  When PDFファイルをアップロードする  
  Then 書籍にファイル情報が紐づけられる  

- Given 書籍が登録されている  
  When 書籍一覧または詳細を取得する  
  Then メタデータおよびファイル有無が確認できる  

---

## 6. 補足

- 本MVPでは認証・認可を扱わないため、すべての操作は制限なく実行できるものとする
- 本MVPは後続のMVP-1で破棄・置き換えられることを前提としたスパイクである
- 実装のしやすさを優先し、将来拡張は考慮しない
